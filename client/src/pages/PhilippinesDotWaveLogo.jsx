import React, { useEffect, useMemo, useRef } from "react";

/**
 * PhilippinesDotWaveLogo
 * - Pure SVG (no images)
 * - Dot positions recreated from your provided dotted PH logo
 * - Every dot animates with a wave-field (requestAnimationFrame)
 */
const DOTS = new Float32Array([
  241.29, 3.29, 4.07, 256.07, 3.35, 4.18, 241.28, 18.21, 4.11, 256.07, 18.27, 4.22, 226.35, 32.93, 4.18, 285.65, 32.93, 4.18,
  270.73, 32.93, 4.22, 241.29, 47.71, 4.07, 270.79, 47.72, 4.11, 226.41, 47.74, 4.15, 285.66, 47.77, 4.11, 226.39, 62.61, 4.15,
  285.61, 62.61, 4.15, 241.23, 62.66, 4.11, 211.44, 62.67, 4.18, 300.56, 62.67, 4.18, 241.29, 77.50, 4.22, 256.00, 77.50, 4.22,
  285.67, 77.56, 4.18, 196.55, 77.57, 4.11, 270.82, 77.60, 4.18, 211.39, 77.61, 4.15, 226.39, 77.61, 4.15, 300.61, 77.61, 4.15,
  196.50, 92.50, 4.07, 226.29, 92.50, 4.22, 241.29, 92.50, 4.22, 256.00, 92.50, 4.22, 285.71, 92.50, 4.22, 270.86, 92.52, 4.22,
  300.61, 92.52, 4.15, 211.43, 92.55, 4.11, 181.61, 107.39, 4.15, 211.39, 107.39, 4.15, 300.61, 107.39, 4.15, 241.26, 107.41, 4.15,
  226.33, 107.44, 4.18, 285.67, 107.44, 4.18, 270.86, 107.46, 4.22, 196.50, 107.50, 4.07, 256.00, 107.50, 4.22, 196.56, 122.33, 4.18,
  211.44, 122.33, 4.18, 300.56, 122.33, 4.18, 270.85, 122.33, 4.15, 181.61, 122.39, 4.15, 226.39, 122.39, 4.15, 285.61, 122.39, 4.15,
  241.26, 122.41, 4.15, 256.11, 122.41, 4.22, 285.59, 137.26, 4.15, 196.50, 137.29, 4.22, 211.50, 137.29, 4.22, 315.50, 137.29, 4.22,
  241.29, 137.29, 4.07, 181.56, 137.33, 4.18, 226.44, 137.33, 4.18, 300.56, 137.33, 4.18, 270.85, 137.33, 4.15, 256.07, 137.35, 4.18,
  196.50, 152.00, 4.22, 211.50, 152.00, 4.22, 315.50, 152.00, 4.22, 226.35, 152.07, 4.18, 285.65, 152.07, 4.18, 181.59, 152.11, 4.22,
  300.59, 152.11, 4.22, 270.70, 152.13, 4.15, 241.33, 152.15, 4.15, 256.07, 152.27, 4.22, 256.07, 166.88, 4.26, 226.35, 166.93, 4.18,
  241.35, 166.93, 4.18, 285.65, 166.93, 4.18, 270.73, 166.93, 4.22, 211.47, 166.93, 4.26, 181.50, 167.00, 4.22, 196.50, 167.00, 4.22,
  300.50, 167.00, 4.22, 315.50, 167.00, 4.22, 256.07, 181.65, 4.18, 270.85, 181.67, 4.15, 181.56, 181.67, 4.18, 300.56, 181.67, 4.18,
  241.29, 181.71, 4.07, 196.50, 181.71, 4.22, 315.50, 181.71, 4.22, 211.41, 181.74, 4.15, 226.41, 181.74, 4.15, 285.66, 181.77, 4.11,
  270.82, 196.60, 4.18, 181.61, 196.61, 4.15, 226.39, 196.61, 4.15, 285.61, 196.61, 4.15, 256.00, 196.63, 4.15, 241.23, 196.66, 4.11,
  211.44, 196.67, 4.18, 300.56, 196.67, 4.18, 196.50, 196.71, 4.22, 315.50, 196.71, 4.22, 241.29, 211.50, 4.22, 256.00, 211.50, 4.22,
  166.67, 211.56, 4.18, 226.33, 211.56, 4.18, 285.67, 211.56, 4.18, 196.55, 211.57, 4.11, 315.55, 211.57, 4.11, 151.89, 211.59, 4.22,
  270.82, 211.60, 4.18, 181.61, 211.61, 4.15, 211.39, 211.61, 4.15, 300.61, 211.61, 4.15, 300.57, 226.45, 4.11, 166.71, 226.50, 4.22,
  196.50, 226.50, 4.07, 226.29, 226.50, 4.22, 241.29, 226.50, 4.22, 256.00, 226.50, 4.22, 285.71, 226.50, 4.22, 270.86, 226.52, 4.22,
  151.93, 226.53, 4.26, 211.43, 226.55, 4.11, 181.67, 226.56, 4.18, 181.61, 241.39, 4.15, 211.39, 241.39, 4.15, 241.26, 241.41, 4.15,
  166.67, 241.44, 4.18, 226.33, 241.44, 4.18, 270.86, 241.46, 4.22, 196.50, 241.50, 4.07, 256.00, 241.50, 4.22, 196.56, 256.33, 4.18,
  211.44, 256.33, 4.18, 270.85, 256.33, 4.15, 166.61, 256.39, 4.15, 181.61, 256.39, 4.15, 226.39, 256.39, 4.15, 241.26, 256.41, 4.15,
  256.11, 256.41, 4.22, 181.59, 271.26, 4.15, 196.50, 271.29, 4.22, 211.50, 271.29, 4.22, 241.29, 271.29, 4.07, 226.37, 271.30, 4.15,
  166.64, 271.32, 4.11, 270.85, 271.33, 4.15, 256.07, 271.35, 4.18, 196.50, 286.00, 4.22, 211.50, 286.00, 4.22, 315.50, 286.00, 4.22,
  226.35, 286.07, 4.18, 270.65, 286.07, 4.18, 181.59, 286.11, 4.22, 300.59, 286.11, 4.22, 241.33, 286.15, 4.15, 256.13, 286.22, 4.18,
  256.07, 300.88, 4.26, 226.35, 300.93, 4.18, 241.35, 300.93, 4.18, 285.65, 300.93, 4.18, 270.73, 300.93, 4.22, 211.47, 300.93, 4.26,
  181.50, 301.00, 4.22, 196.50, 301.00, 4.22, 300.50, 301.00, 4.22, 315.50, 301.00, 4.22, 256.07, 315.65, 4.18, 270.85, 315.67, 4.15,
  300.56, 315.67, 4.18, 241.29, 315.71, 4.07, 360.29, 315.71, 4.07, 196.50, 315.71, 4.22, 315.50, 315.71, 4.22, 211.41, 315.74, 4.15,
  226.41, 315.74, 4.15, 345.41, 315.74, 4.15, 285.66, 315.77, 4.11, 270.82, 330.60, 4.18, 226.39, 330.61, 4.15, 285.61, 330.61, 4.15,
  300.61, 330.61, 4.15, 345.39, 330.61, 4.15, 256.00, 330.63, 4.15, 375.00, 330.63, 4.15, 241.23, 330.66, 4.11, 360.23, 330.66, 4.11,
  211.44, 330.67, 4.18, 330.44, 330.67, 4.18, 315.50, 330.71, 4.22, 241.29, 345.50, 4.22, 256.00, 345.50, 4.22, 360.29, 345.50, 4.22,
  375.00, 345.50, 4.22, 226.33, 345.56, 4.18, 285.67, 345.56, 4.18, 345.33, 345.56, 4.18, 404.67, 345.56, 4.18, 464.33, 345.56, 4.18,
  315.55, 345.57, 4.11, 389.74, 345.59, 4.15, 270.82, 345.60, 4.18, 211.39, 345.61, 4.15, 300.61, 345.61, 4.15, 330.39, 345.61, 4.15,
  449.39, 345.61, 4.15, 300.57, 360.45, 4.11, 196.50, 360.50, 4.07, 226.29, 360.50, 4.22, 241.29, 360.50, 4.22, 256.00, 360.50, 4.22,
  285.71, 360.50, 4.22, 315.50, 360.50, 4.07, 345.29, 360.50, 4.22, 360.29, 360.50, 4.22, 375.00, 360.50, 4.22, 389.71, 360.50, 4.22,
  404.71, 360.50, 4.22, 419.50, 360.50, 4.07, 434.50, 360.50, 4.07, 449.37, 360.50, 4.15, 464.29, 360.50, 4.22, 270.86, 360.52, 4.22,
  211.43, 360.55, 4.11, 330.43, 360.55, 4.11, 181.67, 360.56, 4.18, 211.39, 375.39, 4.15, 300.61, 375.39, 4.15, 330.39, 375.39, 4.15,
  419.61, 375.39, 4.15, 449.39, 375.39, 4.15, 241.26, 375.41, 4.15, 360.26, 375.41, 4.15, 434.45, 375.43, 4.11, 226.33, 375.44, 4.18,
  285.67, 375.44, 4.18, 345.33, 375.44, 4.18, 404.67, 375.44, 4.18, 464.33, 375.44, 4.18, 196.57, 375.45, 4.11, 270.86, 375.46, 4.22,
  256.00, 375.50, 4.22, 315.50, 375.50, 4.07, 375.00, 375.50, 4.22, 389.71, 375.50, 4.22, 211.44, 390.33, 4.18, 300.56, 390.33, 4.18,
  315.56, 390.33, 4.18, 419.56, 390.33, 4.18, 270.85, 390.33, 4.15, 389.77, 390.34, 4.11, 256.07, 390.35, 4.18, 226.39, 390.39, 4.15,
  330.39, 390.39, 4.15, 345.39, 390.39, 4.15, 404.61, 390.39, 4.15, 241.26, 390.41, 4.15, 360.26, 390.41, 4.15, 226.34, 405.23, 4.11,
  285.59, 405.26, 4.15, 404.59, 405.26, 4.15, 419.59, 405.26, 4.15, 270.79, 405.28, 4.11, 315.50, 405.29, 4.22, 434.50, 405.29, 4.22,
  241.29, 405.29, 4.07, 360.29, 405.29, 4.07, 389.71, 405.29, 4.07, 464.29, 405.29, 4.07, 449.44, 405.33, 4.18, 256.07, 405.35, 4.18,
  375.07, 405.35, 4.18, 434.50, 420.00, 4.22, 449.50, 420.00, 4.22, 419.53, 420.07, 4.26, 270.65, 420.07, 4.18, 285.65, 420.07, 4.18,
  389.65, 420.07, 4.18, 464.35, 420.07, 4.18, 404.59, 420.11, 4.22, 241.33, 420.15, 4.15, 256.13, 420.22, 4.18, 375.00, 420.25, 4.26,
  493.87, 434.78, 4.18, 270.80, 434.80, 4.15, 256.05, 434.80, 4.22, 330.41, 434.89, 4.22, 449.41, 434.89, 4.22, 241.35, 434.93, 4.18,
  285.65, 434.93, 4.18, 360.35, 434.93, 4.18, 404.65, 434.93, 4.18, 464.35, 434.93, 4.18, 479.35, 434.93, 4.18, 508.65, 434.93, 4.18,
  523.65, 434.93, 4.18, 315.50, 435.00, 4.22, 419.50, 435.00, 4.22, 434.50, 435.00, 4.22, 285.68, 449.64, 4.11, 256.07, 449.65, 4.18,
  493.93, 449.65, 4.18, 270.85, 449.67, 4.15, 479.15, 449.67, 4.15, 181.56, 449.67, 4.18, 330.44, 449.67, 4.18, 404.56, 449.67, 4.18,
  523.56, 449.67, 4.18, 464.36, 449.68, 4.11, 166.71, 449.71, 4.07, 241.29, 449.71, 4.07, 360.29, 449.71, 4.07, 508.71, 449.71, 4.07,
  196.50, 449.71, 4.22, 315.50, 449.71, 4.22, 419.50, 449.71, 4.22, 434.50, 449.71, 4.22, 538.50, 449.71, 4.22, 345.41, 449.74, 4.15,
  449.41, 449.74, 4.15, 493.89, 464.59, 4.22, 389.74, 464.59, 4.15, 508.74, 464.59, 4.15, 270.82, 464.60, 4.18, 166.61, 464.61, 4.15,
  181.61, 464.61, 4.15, 404.61, 464.61, 4.15, 523.61, 464.61, 4.15, 256.00, 464.63, 4.15, 479.15, 464.67, 4.15, 211.44, 464.67, 4.18,
  330.44, 464.67, 4.18, 419.56, 464.67, 4.18, 434.44, 464.67, 4.18, 449.44, 464.67, 4.18, 538.56, 464.67, 4.18, 196.50, 464.71, 4.22,
  315.50, 464.71, 4.22, 434.50, 479.50, 4.07, 494.00, 479.50, 4.22, 166.67, 479.56, 4.18, 345.33, 479.56, 4.18, 404.67, 479.56, 4.18,
  523.67, 479.56, 4.18, 196.55, 479.57, 4.11, 315.55, 479.57, 4.11, 389.74, 479.59, 4.15, 508.74, 479.59, 4.15, 181.61, 479.61, 4.15,
  211.39, 479.61, 4.15, 330.39, 479.61, 4.15, 449.39, 479.61, 4.15, 538.61, 479.61, 4.15, 479.14, 494.48, 4.22, 181.63, 494.50, 4.15,
  196.50, 494.50, 4.07, 315.50, 494.50, 4.07, 345.29, 494.50, 4.22, 360.29, 494.50, 4.22, 375.00, 494.50, 4.22, 389.71, 494.50, 4.22,
  404.71, 494.50, 4.22, 464.29, 494.50, 4.22, 494.00, 494.50, 4.22, 508.71, 494.50, 4.22, 538.50, 494.50, 4.07, 330.43, 494.55, 4.11,
  523.67, 494.56, 4.18, 330.39, 509.39, 4.15, 523.61, 509.39, 4.15, 538.61, 509.39, 4.15, 479.18, 509.40, 4.18, 360.26, 509.41, 4.15,
  553.45, 509.43, 4.11, 166.67, 509.44, 4.18, 345.33, 509.44, 4.18, 404.67, 509.44, 4.18, 464.33, 509.44, 4.18, 151.86, 509.46, 4.22,
  375.00, 509.50, 4.22, 389.71, 509.50, 4.22, 494.00, 509.50, 4.22, 508.71, 509.50, 4.22, 553.50, 524.29, 4.22, 538.56, 524.33, 4.18,
  151.85, 524.33, 4.15, 389.77, 524.34, 4.11, 375.00, 524.37, 4.15, 494.00, 524.37, 4.15, 166.61, 524.39, 4.15, 330.39, 524.39, 4.15,
  345.39, 524.39, 4.15, 449.39, 524.39, 4.15, 523.61, 524.39, 4.15, 479.18, 524.40, 4.18, 360.26, 524.41, 4.15, 508.74, 524.41, 4.15,
  345.34, 539.23, 4.11, 166.59, 539.26, 4.15, 404.59, 539.26, 4.15, 419.59, 539.26, 4.15, 315.50, 539.29, 4.22, 434.50, 539.29, 4.22,
  553.50, 539.29, 4.22, 360.29, 539.29, 4.07, 389.71, 539.29, 4.07, 508.71, 539.29, 4.07, 330.44, 539.33, 4.18, 449.44, 539.33, 4.18,
  568.44, 539.33, 4.18, 151.85, 539.33, 4.15, 479.15, 539.33, 4.15, 137.07, 539.35, 4.18, 375.07, 539.35, 4.18, 493.93, 539.35, 4.18,
  568.44, 553.96, 4.18, 196.50, 554.00, 4.22, 315.50, 554.00, 4.22, 330.50, 554.00, 4.22, 419.50, 554.00, 4.22, 434.50, 554.00, 4.22,
  449.50, 554.00, 4.22, 553.50, 554.00, 4.22, 151.73, 554.07, 4.22, 479.27, 554.07, 4.22, 166.65, 554.07, 4.18, 345.35, 554.07, 4.18,
  360.35, 554.07, 4.18, 389.65, 554.07, 4.18, 404.65, 554.07, 4.18, 464.35, 554.07, 4.18, 508.65, 554.07, 4.18, 181.59, 554.11, 4.22,
  523.59, 554.11, 4.22, 374.93, 554.12, 4.26, 493.93, 554.12, 4.26, 375.00, 568.75, 4.26, 493.87, 568.78, 4.18, 151.80, 568.80, 4.15,
  137.05, 568.80, 4.22, 389.67, 568.85, 4.15, 508.67, 568.85, 4.15, 330.41, 568.89, 4.22, 449.41, 568.89, 4.22, 568.41, 568.89, 4.22,
  122.35, 568.93, 4.18, 166.65, 568.93, 4.18, 360.35, 568.93, 4.18, 404.65, 568.93, 4.18, 523.65, 568.93, 4.18, 553.47, 568.93, 4.26,
  181.50, 569.00, 4.22, 196.50, 569.00, 4.22, 434.50, 569.00, 4.22, 538.50, 569.00, 4.22, 137.07, 583.65, 4.18, 374.93, 583.65, 4.18,
  493.93, 583.65, 4.18, 151.85, 583.67, 4.15, 523.56, 583.67, 4.18, 404.63, 583.70, 4.15, 122.29, 583.71, 4.07, 389.71, 583.71, 4.07,
  508.71, 583.71, 4.07, 583.29, 583.71, 4.07, 419.50, 583.71, 4.22, 434.50, 583.71, 4.22, 538.50, 583.71, 4.22, 553.50, 583.71, 4.22,
  479.21, 583.72, 4.11, 449.41, 583.74, 4.15, 464.41, 583.74, 4.15, 568.41, 583.74, 4.15, 583.33, 598.56, 4.18, 493.89, 598.59, 4.22,
  122.26, 598.59, 4.15, 389.74, 598.59, 4.15, 107.39, 598.61, 4.15, 404.61, 598.61, 4.15, 449.39, 598.61, 4.15, 464.39, 598.61, 4.15,
  523.61, 598.61, 4.15, 568.39, 598.61, 4.15, 137.00, 598.63, 4.15, 375.00, 598.63, 4.15, 360.23, 598.66, 4.11, 479.15, 598.67, 4.15,
  419.56, 598.67, 4.18, 434.44, 598.67, 4.18, 538.56, 598.67, 4.18, 553.44, 598.67, 4.18, 122.29, 613.50, 4.22, 360.29, 613.50, 4.22,
  375.00, 613.50, 4.22, 434.50, 613.50, 4.07, 583.29, 613.50, 4.22, 479.14, 613.54, 4.22, 553.43, 613.55, 4.11, 107.33, 613.56, 4.18,
  404.67, 613.56, 4.18, 464.33, 613.56, 4.18, 389.74, 613.59, 4.15, 92.39, 613.61, 4.15, 419.61, 613.61, 4.15, 449.39, 613.61, 4.15,
  538.61, 613.61, 4.15, 568.39, 613.61, 4.15, 107.33, 628.44, 4.18, 568.33, 628.44, 4.18, 419.57, 628.45, 4.11, 77.50, 628.50, 4.07,
  92.50, 628.50, 4.07, 122.29, 628.50, 4.22, 360.29, 628.50, 4.22, 375.00, 628.50, 4.22, 389.71, 628.50, 4.22, 404.71, 628.50, 4.22,
  434.50, 628.50, 4.07, 494.00, 628.50, 4.22, 508.71, 628.50, 4.22, 538.50, 628.50, 4.07, 553.50, 628.50, 4.07, 583.29, 628.50, 4.22,
  62.61, 643.39, 4.15, 77.61, 643.39, 4.15, 92.39, 643.39, 4.15, 419.61, 643.39, 4.15, 538.61, 643.39, 4.15, 568.39, 643.39, 4.15,
  434.45, 643.43, 4.11, 553.45, 643.43, 4.11, 107.33, 643.44, 4.18, 404.67, 643.44, 4.18, 583.33, 643.44, 4.18, 389.71, 643.50, 4.22,
  494.00, 643.50, 4.22, 508.71, 643.50, 4.22, 553.50, 658.29, 4.22, 77.56, 658.33, 4.18, 538.56, 658.33, 4.18, 508.77, 658.34, 4.11,
  47.61, 658.39, 4.15, 62.61, 658.39, 4.15, 523.61, 658.39, 4.15, 568.39, 658.39, 4.15, 583.26, 658.41, 4.15, 62.59, 673.26, 4.15,
  419.59, 673.26, 4.15, 523.59, 673.26, 4.15, 538.59, 673.26, 4.15, 479.21, 673.28, 4.11, 434.50, 673.29, 4.22, 553.50, 673.29, 4.22,
  47.71, 673.29, 4.07, 508.71, 673.29, 4.07, 583.29, 673.29, 4.07, 449.44, 673.33, 4.18, 568.44, 673.33, 4.18, 32.85, 673.33, 4.15,
  493.93, 673.35, 4.18, 434.50, 688.00, 4.22, 449.50, 688.00, 4.22, 553.50, 688.00, 4.22, 568.50, 688.00, 4.22, 419.53, 688.07, 4.26,
  538.53, 688.07, 4.26, 479.27, 688.07, 4.22, 389.65, 688.07, 4.18, 404.65, 688.07, 4.18, 508.65, 688.07, 4.18, 583.35, 688.07, 4.18,
  523.59, 688.11, 4.22, 493.93, 688.12, 4.26, 32.78, 688.13, 4.18, 375.00, 702.75, 4.26, 493.87, 702.78, 4.18, 18.20, 702.80, 4.15,
  32.80, 702.80, 4.15, 389.67, 702.85, 4.15, 508.67, 702.85, 4.15, 479.30, 702.87, 4.15, 449.41, 702.89, 4.22, 568.41, 702.89, 4.22,
  3.35, 702.93, 4.18, 47.65, 702.93, 4.18, 360.35, 702.93, 4.18, 404.65, 702.93, 4.18, 464.35, 702.93, 4.18, 523.65, 702.93, 4.18,
  583.35, 702.93, 4.18, 553.47, 702.93, 4.26, 419.50, 703.00, 4.22, 434.50, 703.00, 4.22, 538.50, 703.00, 4.22, 18.07, 717.65, 4.18,
  32.93, 717.65, 4.18, 374.93, 717.65, 4.18, 493.93, 717.65, 4.18, 389.77, 717.66, 4.11, 479.15, 717.67, 4.15, 404.56, 717.67, 4.18,
  449.44, 717.67, 4.18, 523.56, 717.67, 4.18, 464.36, 717.68, 4.11, 3.29, 717.71, 4.07, 360.29, 717.71, 4.07, 508.71, 717.71, 4.07,
  583.29, 717.71, 4.07, 419.50, 717.71, 4.22, 434.50, 717.71, 4.22, 538.50, 717.71, 4.22, 553.50, 717.71, 4.22, 345.41, 717.74, 4.15,
  568.41, 717.74, 4.15, 3.33, 732.56, 4.18, 374.96, 732.56, 4.18, 583.33, 732.56, 4.18, 493.89, 732.59, 4.22, 360.26, 732.59, 4.15,
  389.74, 732.59, 4.15, 508.74, 732.59, 4.15, 479.18, 732.60, 4.18, 345.39, 732.61, 4.15, 404.61, 732.61, 4.15, 419.61, 732.61, 4.15,
  449.39, 732.61, 4.15, 464.39, 732.61, 4.15, 523.61, 732.61, 4.15, 538.61, 732.61, 4.15, 568.39, 732.61, 4.15, 18.00, 732.63, 4.15,
  434.44, 732.67, 4.18, 553.44, 732.67, 4.18, 360.29, 747.50, 4.22, 375.00, 747.50, 4.22, 434.50, 747.50, 4.07, 494.00, 747.50, 4.22,
  583.29, 747.50, 4.22, 479.14, 747.54, 4.22, 553.43, 747.55, 4.11, 345.33, 747.56, 4.18, 404.67, 747.56, 4.18, 464.33, 747.56, 4.18,
  523.67, 747.56, 4.18, 389.74, 747.59, 4.15, 508.74, 747.59, 4.15, 419.61, 747.61, 4.15, 538.61, 747.61, 4.15, 568.39, 747.61, 4.15,
  568.33, 762.44, 4.18, 360.22, 762.47, 4.18, 479.14, 762.48, 4.22, 345.29, 762.50, 4.22, 464.29, 762.50, 4.22, 494.00, 762.50, 4.22,
  508.71, 762.50, 4.22, 523.71, 762.50, 4.22, 538.50, 762.50, 4.07, 553.50, 762.50, 4.07, 583.29, 762.50, 4.22, 330.43, 762.55, 4.11,
  330.39, 777.39, 4.15, 523.61, 777.39, 4.15, 538.61, 777.39, 4.15, 568.39, 777.39, 4.15, 479.18, 777.40, 4.18, 553.45, 777.43, 4.11,
  345.33, 777.44, 4.18, 464.33, 777.44, 4.18, 508.67, 777.44, 4.18, 494.00, 777.50, 4.22, 553.50, 792.29, 4.22, 330.44, 792.33, 4.18,
  538.56, 792.33, 4.18, 508.77, 792.34, 4.11, 464.32, 792.36, 4.11, 494.00, 792.37, 4.15, 345.39, 792.39, 4.15, 523.61, 792.39, 4.15,
  568.39, 792.39, 4.15, 479.18, 792.40, 4.18, 360.26, 792.41, 4.15, 345.34, 807.23, 4.11, 464.34, 807.23, 4.11, 523.59, 807.26, 4.15,
  538.59, 807.26, 4.15, 479.21, 807.28, 4.11, 330.50, 807.29, 4.22, 553.50, 807.29, 4.22, 360.29, 807.29, 4.07, 508.71, 807.29, 4.07,
  568.44, 807.33, 4.18, 493.93, 807.35, 4.18, 568.44, 821.96, 4.18, 538.50, 822.00, 4.22, 553.50, 822.00, 4.22, 479.27, 822.07, 4.22,
  508.65, 822.07, 4.18, 583.35, 822.07, 4.18, 523.59, 822.11, 4.22, 493.93, 822.12, 4.26, 493.93, 836.73, 4.22, 479.20, 836.80, 4.15,
  508.67, 836.85, 4.15, 568.41, 836.89, 4.22, 523.65, 836.93, 4.18, 583.35, 836.93, 4.18, 553.47, 836.93, 4.26, 538.50, 837.00, 4.22,
  523.56, 851.67, 4.18, 538.50, 851.71, 4.22, 553.50, 851.71, 4.22, 568.41, 851.74, 4.15
]);

const DOT_COUNT = DOTS.length / 3;
const fract = (n) => n - Math.floor(n);

// Precompute per-dot phase + amplitude once (keeps the animation loop fast)
const DOT_PHASE = (() => {
  const a = new Float32Array(DOT_COUNT);
  for (let i = 0; i < DOT_COUNT; i++) {
    const x = DOTS[i * 3];
    const y = DOTS[i * 3 + 1];
    const s = fract(Math.sin(x * 12.9898 + y * 78.233) * 43758.5453);
    a[i] = s * Math.PI * 2;
  }
  return a;
})();

const DOT_AMP = (() => {
  const a = new Float32Array(DOT_COUNT);
  for (let i = 0; i < DOT_COUNT; i++) {
    const x = DOTS[i * 3];
    const y = DOTS[i * 3 + 1];
    const s = fract(Math.sin(x * 0.017 + y * 0.013 + 1.234) * 12345.678);
    a[i] = 1.8 + s * 4.2; // px
  }
  return a;
})();

export default function PhilippinesDotWaveLogo({
  className = "",
  speed = 1.0,
  intensity = 1.0,
  breathe = 0.25, // 0..0.6 (radius pulse)
}) {
  const circlesRef = useRef([]);

  const prefersReducedMotion = useMemo(() => {
    if (typeof window === "undefined") return false;
    return window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches;
  }, []);

  const rafRef = useRef(null);

  useEffect(() => {
    if (prefersReducedMotion) return;

    let last = 0;

    const tick = (now) => {
      // Throttle to ~30fps for smoother CPU usage (still looks fluid)
      if (now - last < 33) {
        rafRef.current = requestAnimationFrame(tick);
        return;
      }
      last = now;

      const t = now * 0.001 * speed;

      for (let i = 0; i < DOT_COUNT; i++) {
        const el = circlesRef.current[i];
        if (!el) continue;

        const base = i * 3;
        const x = DOTS[base];
        const y = DOTS[base + 1];
        const r0 = DOTS[base + 2];

        const ph = DOT_PHASE[i];
        const amp = DOT_AMP[i] * intensity;

        // Layered wave field (“water + tech”)
        const w1 = Math.sin(t * 1.55 + y * 0.022 + ph);
        const w2 = Math.cos(t * 1.05 + x * 0.018 + ph * 1.31);
        const w3 = Math.sin(t * 0.72 + (x + y) * 0.012 + ph * 0.73);

        const dx = (w1 * 0.75 + w3 * 0.25) * amp;
        const dy = (w2 * 0.65 + w3 * 0.35) * amp;

        // Diagonal drift so it feels like a “flow”
        const drift = Math.sin(t * 0.35 + ph) * 0.9;
        const tx = dx + drift * 0.6;
        const ty = dy - drift * 0.35;

        el.setAttribute("transform", `translate(${tx.toFixed(2)} ${ty.toFixed(2)})`);

        // Subtle pulsing opacity
        const op = 0.25 + 0.70 * (0.5 + 0.5 * Math.sin(t * 2.2 + ph + x * 0.01));
        el.setAttribute("opacity", op.toFixed(3));

        // Optional “breathing” radius
        if (breathe > 0) {
          const rr = r0 * (1 - breathe + breathe * (0.5 + 0.5 * Math.sin(t * 1.4 + ph)));
          el.setAttribute("r", rr.toFixed(2));
        }
      }

      rafRef.current = requestAnimationFrame(tick);
    };

    rafRef.current = requestAnimationFrame(tick);
    return () => rafRef.current && cancelAnimationFrame(rafRef.current);
  }, [prefersReducedMotion, speed, intensity, breathe]);

  return (
    <svg
      className={className}
      viewBox="0 0 590 856"
      preserveAspectRatio="xMidYMid meet"
      aria-hidden="true"
    >
      <defs>
        <filter id="dotGlow" x="-40%" y="-40%" width="180%" height="180%">
          <feGaussianBlur stdDeviation="2.2" result="blur" />
          <feColorMatrix
            in="blur"
            type="matrix"
            values="
              0 0 0 0 0.20
              0 0 0 0 0.45
              0 0 0 0 1
              0 0 0 0.70 0"
            result="glow"
          />
          <feMerge>
            <feMergeNode in="glow" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>

        <linearGradient id="dotFill" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stopColor="#93C5FD" />
          <stop offset="35%" stopColor="#3B82F6" />
          <stop offset="100%" stopColor="#1D4ED8" />
        </linearGradient>

        {/* Subtle fade so it blends into the page */}
        <radialGradient id="softMask" cx="70%" cy="55%" r="70%">
          <stop offset="0%" stopColor="white" stopOpacity="1" />
          <stop offset="70%" stopColor="white" stopOpacity="0.55" />
          <stop offset="100%" stopColor="white" stopOpacity="0.15" />
        </radialGradient>

        <mask id="fadeMask">
          <rect x="0" y="0" width="590" height="856" fill="url(#softMask)" />
        </mask>
      </defs>

      <g mask="url(#fadeMask)" filter="url(#dotGlow)">
        {Array.from({ length: DOT_COUNT }).map((_, i) => {
          const base = i * 3;
          const x = DOTS[base];
          const y = DOTS[base + 1];
          const r = DOTS[base + 2];

          return (
            <circle
              key={i}
              ref={(el) => (circlesRef.current[i] = el)}
              cx={x}
              cy={y}
              r={r}
              fill="url(#dotFill)"
              opacity="0.85"
            />
          );
        })}
      </g>
    </svg>
  );
}
